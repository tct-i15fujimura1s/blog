---
layout: post
title:  "第39回TechFUL Coding Battle"
date:   2021-08-18 08:06:00 +0900
categories: jekyll update
tags:
- TechFUL
- TCB
---

## 「カンマをつけよう」

下の位から見て、3桁毎にカンマを挿入するという問題です。

少々迷ったのですが、文字列を反転して`each_slice(3)`を使う方式で行きました。

正答まで2分0秒でした。

## 「長さ数え」

長さを数えます。いや、`size`メソッドを呼び出すだけなので、数えません。

正答まで19秒でした。

## 「Palindromic Substring」

長さ3以上の部分文字列で回文であるようなものがあるか探します。

左端$0 \le l \le N - 3$を決める→右端$L + 3 \le R \le N$を決めるというやり方で探索しました。

右端を間違えて$L + 2 \le R \le N$にしてしまって失点4です…。

正答まで2分4秒でした。

## 「ビンゴできるかな？」

5x5のビンゴカードに数字が埋まっていて、数字が読み上げられるのでビンゴかどうかを判定します。

いずれかの行、いずれかの列、対角線（左上から右下、右上から左下）のうち一つ以上が埋まっていたらビンゴと判定しました。

正答まで3分19秒でした。

## 「Partial Swapping」



## 「文字列の割り算」

文字列 $T$ が、文字列の $S$ の部分文字列としていくつ見つけられるかという問題です。



## 「回文が嫌い」

与えられる文字列のできるだけ多くの文字の間に、線を通る回文ができないように線を引く問題です。

文字列 $S$ に含まれる文字 $c$ の個数を、 $|c|$ と表現することにします。

### 回文を含まないための条件

まず考えたことが、「長さ2もしくは長さ3の回文を含んではいけない」ということです。

ある文字列が回文を含まないということは、偶数長の回文も奇数長の回文も含まないということと同値です。
偶数長（ただし長さ2以上）の回文はその中に長さ2の回文を必ず含み、奇数長（ただし長さ2以上）の回文はその中に長さ3の回文を必ず含みます。
ただし、この問題では必ず1本以上の辺を通らないといけないので長さ1以下の回文は考えません。

このように考えることで、グラフが長さ2か3の回文を含まなければ、回文を含まないといえることがわかります。


### 最初の提出

単純な無向グラフは、最大で $\frac{N (N - 1)}{2}$ 本の辺を持ちます。
これはすべての異なる頂点のペアを選ぶと考えたときの二項係数 $\binom{N}{2}$ から得られます。

すべての辺があるグラフ（完全グラフ）から最低限の辺を取り除くと考えます。

まず、同じ文字同士を結ぶと、長さ2の回文が得られてしまうため、同じ文字同士の辺は取り除く必要があります。
同じ文字同士を結ぶの辺の本数は以下のように計算できます。

```math
\sum_{a = \texttt{a}}^{\texttt{z}} \binom{|a|}{2}
```


次に長さ3の回文について考えます。

長さ3の回文はaaaもしくはabaの形式になります。

aaaは長さ2の回文を含むため、これを数えると先ほど考えたものと重複してしまうので無視します。

abaについて考えます。
まず、直前に通った辺を再び通らないという条件から、両端の文字は違う場所でないといけないことがわかります。
そこで、abaの数は次のように計算できます。

```math
\sum_{a = \texttt{a}}^{\texttt{z}} \sum_{b = \texttt{a}}^{\texttt{z}}
\begin{cases}
  0 & (a = b) \\
  \binom{|a|}{2} |b| & (c \ne d)
\end{cases}
```

さあ、これで答えが計算できました。提出します。


・

・

・


不正解でした。

### 2回目の提出

どこがいけなかったんでしょうか。
気づいたのは、長さ3の回文の個数は、辺の本数ではないということです。

ここで、紙とペンを出して、aaabbの中のabaとbabに線を引いてみましょう。
どの線も $\|\texttt{a}\| + \|\texttt{b}\| - 2$ 本ずつあることがわかります。
それなら話は簡単です。この数で割るだけです。
しかし、困ったことになぜか答えが合いません。

考えてもわからなかったので、方針を変えることにしました。
文字aと文字bを結ぶ辺は何本まであってもいいでしょうか。

少なくとも、 $\min \\{\texttt{a}, \texttt{b}\\}$ 本はあってもいいです。
aaabbについて考えます。
aとbの間にペアを作り、どの文字もたかだか1本の辺で結ばれているようにすると、最大で2本の辺を引くことができます。

このように考えると、答えは以下のようになります。

```math
\sum_{\{a, b\} \subseteq \{\texttt{a}, \ldots, \texttt{z}\}} \min\{ a, b \} 
```

正答まで33分11秒、失点28でした。